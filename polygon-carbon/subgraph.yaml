specVersion: 0.0.4
description: Polygon Carbon
repository: https://github.com/KlimaDAO/klima-subgraph
schema:
    file: ./schema.graphql
dataSources:
    - kind: ethereum/contract
      name: ToucanFactory
      network: matic
      source:
          address: '0x2359677E513Bc83106268514c5B2De3C29C849ea'
          abi: ToucanCarbonOffsetsFactory
          startBlock: 20100000
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.7
          language: wasm/assemblyscript
          file: ./src/templates/ToucanFactory.ts
          entities:
              - ToucanCarbonOffsetsFactory
          abis:
              - name: ToucanCarbonOffsetsFactory
                file: ../lib/abis/ToucanCarbonOffsetsFactory.json
          eventHandlers:
              - event: TokenCreated(uint256,address)
                handler: handleNewTCO2
    - kind: ethereum/contract
      name: BaseCarbonTonne
      network: matic
      source:
          address: '0x2F800Db0fdb5223b3C3f354886d907A671414A7F'
          abi: BaseCarbonTonne
          startBlock: 20100000
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.7
          language: wasm/assemblyscript
          file: ./src/BCT.ts
          entities:
              - BaseCarbonTonne
          abis:
              - name: BaseCarbonTonne
                file: ../lib/abis/BaseCarbonTonne.json
              - name: ERC20
                file: ../lib/abis/ERC20.json
          eventHandlers:
              - event: Deposited(address,uint256)
                handler: handleDeposited
              - event: Redeemed(address,address,uint256)
                handler: handleRedeemed
              # - event: Transfer(indexed address,indexed address,uint256)
              #   handler: handleTransfer
    # - kind: ethereum/contract
    #   name: NCT
    #   network: matic
    #   source:
    #       address: '0xD838290e877E0188a4A44700463419ED96c16107'
    #       abi: ERC20
    #       startBlock: 24705011
    #   mapping:
    #       kind: ethereum/events
    #       apiVersion: 0.0.7
    #       language: wasm/assemblyscript
    #       file: ./src/TransferHandler.ts
    #       entities:
    #           - NCT
    #       abis:
    #           - name: ERC20
    #             file: ../lib/abis/ERC20.json
    #       eventHandlers:
    #           - event: Transfer(indexed address,indexed address,uint256)
    #             handler: handleTransfer
    # - kind: ethereum/contract
    #   name: MossCarbon
    #   network: matic
    #   source:
    #       address: '0xaa7dbd1598251f856c12f63557a4c4397c253cea'
    #       abi: ERC20
    #       startBlock: 23193932
    #   mapping:
    #       kind: ethereum/events
    #       apiVersion: 0.0.7
    #       language: wasm/assemblyscript
    #       file: ./src/TransferHandler.ts
    #       entities:
    #           - MossCarbon
    #       abis:
    #           - name: ERC20
    #             file: ../lib/abis/ERC20.json
    #       eventHandlers:
    #           - event: Transfer(indexed address,indexed address,uint256)
    #             handler: handleTransfer
    - kind: ethereum/contract
      name: C3ProjectTokenFactory
      network: matic
      source:
          address: '0xa4c951B30952f5E2feFC8a92F4d3c7551925A63B'
          abi: C3ProjectTokenFactory
          startBlock: 25427000
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.7
          language: wasm/assemblyscript
          file: ./src/templates/C3ProjectTokenFactory.ts
          entities:
              - C3ProjectTokenFactory
          abis:
              - name: C3ProjectTokenFactory
                file: ../lib/abis/C3ProjectTokenFactory.json
              - name: C3ProjectToken
                file: ../lib/abis/C3ProjectToken.json
              - name: ERC20
                file: ../lib/abis/ERC20.json
          eventHandlers:
              - event: NewTokenProject(string,address)
                handler: handleNewC3T
    # - kind: ethereum/contract
    #   name: UBO
    #   network: matic
    #   source:
    #       address: '0x2B3eCb0991AF0498ECE9135bcD04013d7993110c'
    #       abi: ERC20
    #       startBlock: 25429000
    #   mapping:
    #       kind: ethereum/events
    #       apiVersion: 0.0.7
    #       language: wasm/assemblyscript
    #       file: ./src/TransferHandler.ts
    #       entities:
    #           - UBO
    #       abis:
    #           - name: ERC20
    #             file: ../lib/abis/ERC20.json
    #       eventHandlers:
    #           - event: Transfer(indexed address,indexed address,uint256)
    #             handler: handleTransfer
    # - kind: ethereum/contract
    #   name: NBO
    #   network: matic
    #   source:
    #       address: '0x6BCa3B77C1909Ce1a4Ba1A20d1103bDe8d222E48'
    #       abi: ERC20
    #       startBlock: 25428000
    #   mapping:
    #       kind: ethereum/events
    #       apiVersion: 0.0.7
    #       language: wasm/assemblyscript
    #       file: ./src/TransferHandler.ts
    #       entities:
    #           - NBO
    #       abis:
    #           - name: ERC20
    #             file: ../lib/abis/ERC20.json
    #       eventHandlers:
    #           - event: Transfer(indexed address,indexed address,uint256)
    #             handler: handleTransfer
templates:
    - name: ToucanCarbonOffsets
      kind: ethereum/contract
      network: matic
      source:
          abi: ToucanCarbonOffsets
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.7
          language: wasm/assemblyscript
          entities:
              - ToucanCarbonOffsets
          abis:
              - name: ToucanCarbonOffsets
                file: ../lib/abis/ToucanCarbonOffsets.json
              - name: ERC20
                file: ../lib/abis/ERC20.json
          eventHandlers:
              - event: Transfer(indexed address,indexed address,uint256)
                handler: handleTransfer
          file: ./src/OffsetTransferHandler.ts
    - name: C3ProjectToken
      kind: ethereum/contract
      network: matic
      source:
          abi: C3ProjectToken
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.7
          language: wasm/assemblyscript
          entities:
              - C3ProjectToken
          abis:
              - name: C3ProjectToken
                file: ../lib/abis/C3ProjectToken.json
              - name: ERC20
                file: ../lib/abis/ERC20.json
          eventHandlers:
              - event: Transfer(indexed address,indexed address,uint256)
                handler: handleTransfer
          file: ./src/OffsetTransferHandler.ts
